execute as @e[type=vindicator] unless predicate {condition:"entity_properties",entity:"this",predicate:{equipment:{mainhand:{predicates:{"minecraft:enchantments":[{enchantments:"bloodthirsty:heal"}]}}}}} run function bloodthirsty:enchant
execute as @e[type=item] if predicate {condition:"entity_properties",entity:"this",predicate:{slots:{container.0:{predicates:{"minecraft:enchantments":[{enchantments:["bloodthirsty:heal"]}]}}}}} run item modify entity @s container.0 {function:"set_components",components:{"!minecraft:enchantment_glint_override":{}}}
execute as @e[type=item] if predicate {condition:"entity_properties",entity:"this",predicate:{slots:{container.0:{components:{"minecraft:custom_data":{enchantment_glint_override:1b}},predicates:{"minecraft:enchantments":[{enchantments:["bloodthirsty:heal"]}]}}}}} run item modify entity @s container.0 {function:"set_components",components:{"minecraft:enchantment_glint_override":true}}
execute as @e[type=item] if predicate {condition:"entity_properties",entity:"this",predicate:{slots:{container.0:{components:{"minecraft:custom_data":{enchantment_glint_override:0b}},predicates:{"minecraft:enchantments":[{enchantments:["bloodthirsty:heal"]}]}}}}} run item modify entity @s container.0 {function:"set_components",components:{"minecraft:enchantment_glint_override":false}}
execute as @e[type=item] if predicate {condition:"entity_properties",entity:"this",predicate:{slots:{container.0:{predicates:{"minecraft:enchantments":[{enchantments:["bloodthirsty:heal"]}]}}}}} run data remove entity @s Item.components."minecraft:custom_data".enchantment_glint_override
execute as @e[type=item] run item modify entity @s container.0 {function:"set_enchantments",enchantments:{"bloodthirsty:heal":0}}