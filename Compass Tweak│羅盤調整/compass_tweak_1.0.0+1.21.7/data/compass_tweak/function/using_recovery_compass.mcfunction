advancement revoke @s only compass_tweak:using_recovery_compass

execute unless data entity @s LastDeathLocation run title @s actionbar {"translate":"compass_tweak.actionbar.err",color:"red"}
title @s[nbt={LastDeathLocation:{dimension:"minecraft:overworld"}}] actionbar [{translate:"compass_tweak.actionbar.pos"},{entity:"@s",nbt:"LastDeathLocation.pos[0]",color:"red"},{text:", ",color:"red"},{entity:"@s",nbt:"LastDeathLocation.pos[1]",color:"green"},{text:", ",color:"green"},{entity:"@s",nbt:"LastDeathLocation.pos[2]",color:"blue"}," | ",{translate:"compass_tweak.actionbar.dimension"},{translate:"flat_world_preset.minecraft.overworld"}]
title @s[nbt={LastDeathLocation:{dimension:"minecraft:the_nether"}}] actionbar [{translate:"compass_tweak.actionbar.pos"},{entity:"@s",nbt:"LastDeathLocation.pos[0]",color:"red"},{text:", ",color:"red"},{entity:"@s",nbt:"LastDeathLocation.pos[1]",color:"green"},{text:", ",color:"green"},{entity:"@s",nbt:"LastDeathLocation.pos[2]",color:"blue"}," | ",{translate:"compass_tweak.actionbar.dimension"},{translate:"dimension.the_nether"}]
title @s[nbt={LastDeathLocation:{dimension:"minecraft:the_end"}}] actionbar [{translate:"compass_tweak.actionbar.pos"},{entity:"@s",nbt:"LastDeathLocation.pos[0]",color:"red"},{text:", ",color:"red"},{entity:"@s",nbt:"LastDeathLocation.pos[1]",color:"green"},{text:", ",color:"green"},{entity:"@s",nbt:"LastDeathLocation.pos[2]",color:"blue"}," | ",{translate:"compass_tweak.actionbar.dimension"},{translate:"biome.minecraft.the_end"}]
execute if data entity @s LastDeathLocation unless entity @s[nbt={LastDeathLocation:{dimension:"minecraft:overworld"}}] unless entity @s[nbt={LastDeathLocation:{dimension:"minecraft:the_nether"}}] unless entity @s[nbt={LastDeathLocation:{dimension:"minecraft:the_end"}}] run title @s actionbar [{translate:"compass_tweak.actionbar.pos"},{entity:"@s",nbt:"LastDeathLocation.pos[0]",color:"red"},{text:", ",color:"red"},{entity:"@s",nbt:"LastDeathLocation.pos[1]",color:"green"},{text:", ",color:"green"},{entity:"@s",nbt:"LastDeathLocation.pos[2]",color:"blue"}," | ",{translate:"compass_tweak.actionbar.dimension"},'"',{entity:"@s",nbt:"LastDeathLocation.dimension"},'"']

execute if predicate {condition:"entity_properties",entity:"this",predicate:{flags:{is_sneaking:true}}} if items entity @s weapon.mainhand recovery_compass if items entity @s weapon.offhand echo_shard if data entity @s LastDeathLocation run data modify storage compass_tweak:storage LastDeathLocation.x set from entity @s LastDeathLocation.pos[0]
execute if predicate {condition:"entity_properties",entity:"this",predicate:{flags:{is_sneaking:true}}} if items entity @s weapon.mainhand recovery_compass if items entity @s weapon.offhand echo_shard if data entity @s LastDeathLocation run data modify storage compass_tweak:storage LastDeathLocation.y set from entity @s LastDeathLocation.pos[1]
execute if predicate {condition:"entity_properties",entity:"this",predicate:{flags:{is_sneaking:true}}} if items entity @s weapon.mainhand recovery_compass if items entity @s weapon.offhand echo_shard if data entity @s LastDeathLocation run data modify storage compass_tweak:storage LastDeathLocation.z set from entity @s LastDeathLocation.pos[2]
execute if predicate {condition:"entity_properties",entity:"this",predicate:{flags:{is_sneaking:true}}} if items entity @s weapon.mainhand recovery_compass if items entity @s weapon.offhand echo_shard if data entity @s LastDeathLocation run function compass_tweak:positioned with storage compass_tweak:storage LastDeathLocation