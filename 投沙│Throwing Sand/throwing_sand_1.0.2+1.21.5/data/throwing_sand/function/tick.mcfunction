execute as @e[type=block_display,tag=throwing_sand] run function throwing_sand:tp_to_arrow with entity @s data
execute as @e[type=villager,tag=animated] run function throwing_sand:tp_to_husk with entity @s data
execute as @e[type=block_display,tag=throwing_sand] run function throwing_sand:kill_display with entity @s data
execute as @e[type=villager,tag=animated] run function throwing_sand:kill_villager with entity @s data
kill @e[type=arrow,tag=throwing_sand,nbt={inGround:1b}]
execute as @e[type=villager,tag=animated] run data modify entity @s drop_chances set value {head:0f}
scoreboard players remove @e[type=husk,scores={cooldown_of_throwing_sand=1..}] cooldown_of_throwing_sand 1
scoreboard players set @e[type=husk,tag=!cooldown_set] cooldown_of_throwing_sand 0
tag @e[type=husk,tag=!cooldown_set] add cooldown_set
scoreboard players add @e[type=husk,tag=holding_sand] holding_sand_time 1
execute as @e[type=husk,tag=holding_sand,scores={holding_sand_time=40..}] at @s run function throwing_sand:put_down_the_sand
execute as @e[type=item] if items entity @s container.0 sand[minecraft:item_model="sand_block"] run function throwing_sand:convert_sand_block {sand_type:"sand"}
execute as @e[type=item] if items entity @s container.0 red_sand[minecraft:item_model="red_sand_block"] run function throwing_sand:convert_sand_block {sand_type:"red_sand"}
execute as @e[type=item] if items entity @s container.0 stick[minecraft:enchantments={"throwing_sand:launch":1}] run kill @s
data modify entity @s last_hurt_by_mob set from entity @n[type=villager,tag=animated] UUID
execute as @e[type=husk,predicate=throwing_sand:has_attack_target,scores={cooldown_of_throwing_sand=0}] unless items entity @s weapon.offhand sand[minecraft:item_model="sand_block"] unless items entity @s weapon.offhand red_sand[minecraft:item_model="red_sand_block"] if items entity @s weapon.* sand unless entity @s[nbt={NoAI:1b}] at @s run function throwing_sand:throwing_item_sand
execute as @e[type=husk,predicate=throwing_sand:has_attack_target,scores={cooldown_of_throwing_sand=0}] unless items entity @s weapon.offhand sand[minecraft:item_model="sand_block"] unless items entity @s weapon.offhand red_sand[minecraft:item_model="red_sand_block"] if items entity @s weapon.* red_sand unless entity @s[nbt={NoAI:1b}] at @s run function throwing_sand:throwing_item_sand
execute as @e[type=husk,predicate=throwing_sand:has_attack_target,scores={cooldown_of_throwing_sand=0}] unless items entity @s weapon.offhand sand[minecraft:item_model="sand_block"] unless items entity @s weapon.offhand red_sand[minecraft:item_model="red_sand_block"] unless entity @s[nbt={NoAI:1b}] at @s store success score @s there_is_sand_nearby run fill ~-1 ~-1 ~-1 ~1 ~2 ~1 minecraft:command_block{Command:"sand"} replace sand strict
execute as @e[type=husk,predicate=throwing_sand:has_attack_target,scores={cooldown_of_throwing_sand=0}] unless items entity @s weapon.offhand sand[minecraft:item_model="sand_block"] unless items entity @s weapon.offhand red_sand[minecraft:item_model="red_sand_block"] unless entity @s[nbt={NoAI:1b}] at @s run fill ~-1 ~-1 ~-1 ~1 ~2 ~1 minecraft:sand replace command_block{Command:"sand"} strict
execute as @e[type=husk,predicate=throwing_sand:has_attack_target,scores={cooldown_of_throwing_sand=0}] unless items entity @s weapon.offhand sand[minecraft:item_model="sand_block"] unless items entity @s weapon.offhand red_sand[minecraft:item_model="red_sand_block"] unless entity @s[nbt={NoAI:1b}] at @s store success score @s there_is_red_sand_nearby run fill ~-1 ~-1 ~-1 ~1 ~2 ~1 minecraft:command_block{Command:"red_sand"} replace red_sand strict
execute as @e[type=husk,predicate=throwing_sand:has_attack_target,scores={cooldown_of_throwing_sand=0}] unless items entity @s weapon.offhand sand[minecraft:item_model="sand_block"] unless items entity @s weapon.offhand red_sand[minecraft:item_model="red_sand_block"] unless entity @s[nbt={NoAI:1b}] at @s run fill ~-1 ~-1 ~-1 ~1 ~2 ~1 minecraft:red_sand replace command_block{Command:"red_sand"} strict
execute as @e[type=husk,predicate=throwing_sand:has_attack_target,scores={cooldown_of_throwing_sand=0}] unless items entity @s weapon.offhand sand[minecraft:item_model="sand_block"] unless items entity @s weapon.offhand red_sand[minecraft:item_model="red_sand_block"] unless entity @s[nbt={NoAI:1b}] run scoreboard players operation @s can_throw_sand = @s there_is_sand_nearby
execute as @e[type=husk,predicate=throwing_sand:has_attack_target,scores={can_throw_sand=0,cooldown_of_throwing_sand=0}] unless items entity @s weapon.offhand sand[minecraft:item_model="sand_block"] unless items entity @s weapon.offhand red_sand[minecraft:item_model="red_sand_block"] unless entity @s[nbt={NoAI:1b}] run scoreboard players operation @s can_throw_sand = @s there_is_red_sand_nearby
execute as @e[type=husk,predicate=throwing_sand:has_attack_target,scores={can_throw_sand=1,cooldown_of_throwing_sand=0}] unless items entity @s weapon.offhand sand[minecraft:item_model="sand_block"] unless items entity @s weapon.offhand red_sand[minecraft:item_model="red_sand_block"] unless entity @s[nbt={NoAI:1b}] at @s run function throwing_sand:throwing_sand