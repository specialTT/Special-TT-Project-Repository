execute as @e[type=potion,predicate=!invisible_armor_stands_and_item_frames:carrying_marker,nbt={Item:{components:{"minecraft:potion_contents":{potion:"minecraft:water"}}}}] at @s summon marker run function invisible_armor_stands_and_item_frames:set_marker {tag:"is_water_bottle"}
execute as @e[type=potion,predicate=!invisible_armor_stands_and_item_frames:carrying_marker,nbt={Item:{components:{"minecraft:potion_contents":{potion:"minecraft:mundane"}}}}] at @s summon marker run function invisible_armor_stands_and_item_frames:set_marker {tag:"is_water_bottle"}
execute as @e[type=potion,predicate=!invisible_armor_stands_and_item_frames:carrying_marker,nbt={Item:{components:{"minecraft:potion_contents":{potion:"minecraft:thick"}}}}] at @s summon marker run function invisible_armor_stands_and_item_frames:set_marker {tag:"is_water_bottle"}
execute as @e[type=potion,predicate=!invisible_armor_stands_and_item_frames:carrying_marker,nbt={Item:{components:{"minecraft:potion_contents":{potion:"minecraft:awkward"}}}}] at @s summon marker run function invisible_armor_stands_and_item_frames:set_marker {tag:"is_water_bottle"}
execute as @e[type=potion,predicate=!invisible_armor_stands_and_item_frames:carrying_marker,nbt={Item:{components:{"minecraft:potion_contents":{potion:"minecraft:invisibility"}}}}] at @s summon marker run function invisible_armor_stands_and_item_frames:set_marker {tag:"is_invisibility_potion"}
execute as @e[type=potion,predicate=!invisible_armor_stands_and_item_frames:carrying_marker,nbt={Item:{components:{"minecraft:potion_contents":{potion:"minecraft:long_invisibility"}}}}] at @s summon marker run function invisible_armor_stands_and_item_frames:set_marker {tag:"is_invisibility_potion"}
execute at @e[type=marker,tag=is_water_bottle,predicate=!invisible_armor_stands_and_item_frames:vehicle_potion] as @e[distance=..4,type=#invisible_armor_stands_and_item_frames:invisible_entity] run data modify entity @s Invisible set value 0b
execute at @e[type=marker,tag=is_invisibility_potion,predicate=!invisible_armor_stands_and_item_frames:vehicle_potion] as @e[distance=..4,type=#invisible_armor_stands_and_item_frames:invisible_entity] run data modify entity @s Invisible set value 1b
kill @e[type=marker,tag=potion_effect,predicate=!invisible_armor_stands_and_item_frames:vehicle_potion]